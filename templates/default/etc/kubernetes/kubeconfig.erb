apiVersion: v1
knid: Config
clusters:
<%
unless @clusters.nil?
  @clusters.each do |cluster| %>
- cluster:
<%  unless cluster.api_version.nil? %>
    api-version: <%= cluster.cluster.api_version %>
<%  end
    unless cluster.ca.nil? %>
    certificate-authority: <%= cluster.ca %>
<%  end
    unless cluster.server.nil? %>
    server: <%= cluster.server %>
<%  end
    unless cluster.skip_tls_verify.nil? %>
    insecure-skip-tls-verify: <%= cluster.skip_tls_verify %>
<%  end
    unless cluster.name.nil? %>
  name: <%= cluster.name %>
<%
    end
  end
end %>
users:
<%
unless @users.nil?
  @users.each do |user| %>
- name: <%= user.name %>
  user:
<%  unless user.token.nil? %>
    token: <%= user.token %>
<%  end
    unless user.cert.nil? %>
    client-certificate: <%= user.cert %>
<%  end
    unless user.key.nil? %>
    client-key: <%= user.key %>
<%  end
    unless user.username.nil? %>
    username: <%= user.username %>
<%  end
    unless user.password.nil? %>
    password: <%= user.password %>
<%
    end
  end
end %>
contexts:
<%
unless @contexts.nil?
  @contexts.each do |context| %>
- context:
<% unless context.namespace.nil? %>
    namespace: <%= context.namespace %>
<%  end
    unless context.cluster.nil? %>
    cluster: <%= context.cluster %>
<%  end
    unless context.user.nil? %>
    user: <%= context.user %>
<%  end %>
  name: <%= context.name %>
<%  end
  end
end %>

current-context: <%= @current_context %>
